import{fn as K}from"./index-BgJgh-x_.js";import{j as h}from"./jsx-runtime-D_zvdyIk.js";import{r as c}from"./index-DI7CEG0L.js";import{C as Q,R as U,A as G,z as M,H as R,v as X,D as tt,i as $,T as et}from"./styles-DZKIi-Hd.js";import{s as nt,V as x}from"./index-BzmpT3sc.js";const F=nt.create({wheelItem:{height:42,width:"100%",alignItems:"center",justifyContent:"center"},wheelPicker:{borderWidth:1,borderRadius:U.S,flex:1},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,justifyContent:"center",zIndex:-1},selectedItem:{height:42,backgroundColor:Q.blue_10},datePicker:{overflow:"hidden",flexDirection:"row",justifyContent:"space-evenly"}}),E=s=>s>9?String(s):`0${s}`,ot=(s,e,t,n)=>{const r=new Date(s,e,0).getDate();let o=1,i=r;s===t.getFullYear()&&e===t.getMonth()+1&&(o=t.getDate()),s===n.getFullYear()&&e===n.getMonth()+1&&(i=n.getDate());const g=[];for(let f=o;f<=i;f++)g.push(E(f));return g},st=(s,e,t)=>{let n=1,r=12;t===s.getFullYear()&&(n=s.getMonth()+1),t===e.getFullYear()&&(r=e.getMonth()+1);const o=[];for(let i=n;i<=r;i++)o.push(E(i));return o},rt=(s,e)=>{const t=s.getFullYear(),n=e.getFullYear(),r=[];for(let o=t;o<=n;o++)r.push(o.toString());return r},at=s=>{const e=[];for(let t=0;t<s;t++){let n=t;s===12&&(n=t+1),e.push(E(n))}return e},ct=s=>{const e=[];for(let t=0;t<60;t+=s)e.push(E(t));return e},lt=["","","AM","PM","",""];function it(s,e){let t;const n=function(...r){clearTimeout(t);const o=this;t=setTimeout(()=>{s.apply(o,r)},e)};return n.cancel=()=>{clearTimeout(t)},n}const ut=({item:s,index:e,scrollAnimatedValue:t,itemSize:n})=>{const{theme:r}=c.useContext(G),o=M.divide(t,n),i=M.subtract(e,o),g=i.interpolate({inputRange:[0,1,2,3,4],outputRange:[.4,.8,1,.8,.4],extrapolate:"clamp"})||1,f=i.interpolate({inputRange:[0,1,2,3,4],outputRange:[.87,.87,1,.87,.87],extrapolate:"clamp"})||1;return h.jsx(M.View,{style:[F.wheelItem,{opacity:g}],children:h.jsx(M.Text,{style:{fontFamily:`${r.font}-Semibold`,transform:[{scale:f}],fontSize:R(16),lineHeight:R(22)},children:s})})},dt=c.memo(ut),mt=M.createAnimatedComponent(X),ft=({name:s,data:e,style:t,onChange:n,selectedData:r})=>{const{theme:o}=c.useContext(G),i=c.useRef(null),g=c.useRef(new M.Value(0)).current,f=c.useRef(!1),p=42,m=15;c.useEffect(()=>(S(),()=>{S.cancel()}),[e.length]);const O=(a,l)=>{let W=a.reduce((D,Y)=>{let b=Math.abs(Number(D)-Number(l)),j=Math.abs(Number(Y)-Number(l));return b===j?D<Y?D:Y:j<b?Y:D});return a.indexOf(W)},S=it(()=>{var l;let a=e.indexOf(r);a===-1&&(a=O(e,r)),a<2&&(a=2),a>e.length-3&&(a=e.length-3),(l=i.current)==null||l.scrollToIndex({index:a-2,animated:!0})},100),T=c.useCallback(({item:a,index:l})=>h.jsx(dt,{item:a,index:l,scrollAnimatedValue:g,itemSize:p}),[]),v=()=>h.jsx(x,{style:F.overlay,children:h.jsx(x,{style:F.selectedItem})}),I=(a,l)=>({length:p,offset:p*l,index:l}),H=()=>{f.current=!0},N=a=>{if(f.current){let l=Math.round(a.nativeEvent.contentOffset.y/p);n==null||n(s,e[l+2])}f.current=!1},A=a=>{console.warn("FlatList scrollToIndex failed",a)};return h.jsxs(x,{style:[t,F.wheelPicker,{borderColor:o.colors.border.default,backgroundColor:o.colors.background.surface}],children:[h.jsx(mt,{windowSize:7,initialNumToRender:m,maxToRenderPerBatch:m,snapToInterval:p,snapToOffsets:e.map((a,l)=>l*p),keyExtractor:(a,l)=>`Wheel picker item ${a}-${l}`,decelerationRate:"fast",getItemLayout:I,onScrollToIndexFailed:A,onMomentumScrollBegin:H,onScroll:M.event([{nativeEvent:{contentOffset:{y:g}}}],{useNativeDriver:!0}),onMomentumScrollEnd:N,ref:i,showsVerticalScrollIndicator:!1,data:e,renderItem:T}),v()]})},ht=c.memo(ft),P=new Date,C=new Date(P),z=new Date(P);C.setFullYear(C.getFullYear()-10);z.setFullYear(z.getFullYear()+10);P.setHours(0,0);const gt=tt.get("window").width,pt=({format:s="DD-MM-YYYY",minuteInterval:e=1,onChange:t,selectedValue:n=P,minDate:r=C,maxDate:o=z,arrayLabelTime:i=[],style:g})=>{const[f,p]=c.useState([]);let[m,O]=c.useState({day:n.getDate(),month:n.getMonth()+1,year:n.getFullYear(),hour:n.getHours(),min:n.getMinutes()});const[S,T]=c.useState(gt);c.useEffect(()=>{W()},[m]),c.useEffect(()=>{let u=n;n<r?u=r:n>o&&(u=o),t==null||t(u)},[]);const v=s.split(/[^A-Za-z]+/),I=v.length===1&&v[0]==="HH",H=c.useMemo(()=>ot(+m.year,+m.month,r,o),[m.year,m.month,r,o]),N=c.useMemo(()=>st(r,o,+m.year),[m.year,r,o]),A=c.useMemo(()=>rt(r,o),[r,o]),a=c.useMemo(()=>at(I?12:24),[]),l=c.useMemo(()=>ct(e),[]),W=()=>{const u={DD:{name:"day",data:H},MM:{name:"month",data:N},YYYY:{name:"year",data:A},HH:{name:"hour",data:a},mm:{name:"min",data:l}},y=v.map(d=>{const w=u[d];if(!w)throw new Error(`Invalid format component: ${d}`);return{...w}});I&&y.push({name:"timeMode",data:lt}),p(y)},D=f.length,Y=(u,y)=>{const d={...m,[u]:y};if(u==="month"){const J=new Date(d.year,d.month,0).getDate();d.day>J&&(d.day=J)}const w=new Date(d.year,d.month-1,d.day,d.hour,d.min);w<=o&&w>=r&&JSON.stringify(d.valueOf())!==JSON.stringify(m.valueOf())&&(t==null||t(w)),O(d)},b=["",""],j=u=>{S!==u.nativeEvent.layout.width&&T(u.nativeEvent.layout.width)};return h.jsx(x,{onLayout:j,style:[g,F.datePicker,{height:i.length>0?R(238):R(210)}],children:f.map((u,y)=>h.jsxs(x,{children:[i[y]&&h.jsx(x,{style:{alignItems:"center",marginBottom:$.S},children:h.jsx(et,{typography:"action_s_bold",children:i[y]})}),h.jsx(ht,{selectedData:String(m[u.name]),onChange:Y,data:[...b,...u.data,...b],name:u.name,style:{width:(S-$.M*2-(D-1)*$.M)/D}})]},`${u.name}_${y}`))})},xt={title:"Library/DateTimePicker",component:pt,parameters:{layout:"centered"},tags:["autodocs"]},B=new Date,_=new Date(B);_.setFullYear(_.getFullYear()-10);const L=new Date(B);L.setFullYear(L.getFullYear()+10);const k={args:{selectedValue:B,minDate:_,maxDate:L,onChange:K(),format:"DD-MM-YYYY"}};var V,Z,q;k.parameters={...k.parameters,docs:{...(V=k.parameters)==null?void 0:V.docs,source:{originalSource:`{
  args: {
    selectedValue: today,
    minDate,
    maxDate,
    onChange: fn(),
    format: 'DD-MM-YYYY'
  }
}`,...(q=(Z=k.parameters)==null?void 0:Z.docs)==null?void 0:q.source}}};const St=["Default"];export{k as Default,St as __namedExportsOrder,xt as default};

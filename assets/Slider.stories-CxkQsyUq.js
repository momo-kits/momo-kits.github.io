import{j as v}from"./jsx-runtime-D_zvdyIk.js";import{fn as O}from"./index-BgJgh-x_.js";import{r as u}from"./index-DI7CEG0L.js";import{U as ze,R as le,i as ee,C as fn,w as Ne,T as vn,z as b,A as Cn}from"./styles-DZKIi-Hd.js";import{s as ue,V as P}from"./index-BzmpT3sc.js";var ie={},R={centroidDimension:function(n,t,r,o){var s=n.touchBank,h=0,i=0,a=n.numberActiveTouches===1?n.touchBank[n.indexOfSingleActiveTouch]:null;if(a!==null)a.touchActive&&a.currentTimeStamp>t&&(h+=o&&r?a.currentPageX:o&&!r?a.currentPageY:!o&&r?a.previousPageX:a.previousPageY,i=1);else for(var c=0;c<s.length;c++){var l=s[c];if(l!=null&&l.touchActive&&l.currentTimeStamp>=t){var d=void 0;o&&r?d=l.currentPageX:o&&!r?d=l.currentPageY:!o&&r?d=l.previousPageX:d=l.previousPageY,h+=d,i++}}return i>0?h/i:R.noCentroid},currentCentroidXOfTouchesChangedAfter:function(n,t){return R.centroidDimension(n,t,!0,!0)},currentCentroidYOfTouchesChangedAfter:function(n,t){return R.centroidDimension(n,t,!1,!0)},previousCentroidXOfTouchesChangedAfter:function(n,t){return R.centroidDimension(n,t,!0,!1)},previousCentroidYOfTouchesChangedAfter:function(n,t){return R.centroidDimension(n,t,!1,!1)},currentCentroidX:function(n){return R.centroidDimension(n,0,!0,!0)},currentCentroidY:function(n){return R.centroidDimension(n,0,!1,!0)},noCentroid:-1},xe=R.currentCentroidXOfTouchesChangedAfter,we=R.currentCentroidYOfTouchesChangedAfter,Rn=R.previousCentroidXOfTouchesChangedAfter,bn=R.previousCentroidYOfTouchesChangedAfter,Tn=R.currentCentroidX,gn=R.currentCentroidY,F={_initializeGestureState(e){e.moveX=0,e.moveY=0,e.x0=0,e.y0=0,e.dx=0,e.dy=0,e.vx=0,e.vy=0,e.numberActiveTouches=0,e._accountsForMovesUpTo=0},_updateGestureStateOnMove(e,n){e.numberActiveTouches=n.numberActiveTouches,e.moveX=xe(n,e._accountsForMovesUpTo),e.moveY=we(n,e._accountsForMovesUpTo);var t=e._accountsForMovesUpTo,r=Rn(n,t),o=xe(n,t),s=bn(n,t),h=we(n,t),i=e.dx+(o-r),a=e.dy+(h-s),c=n.mostRecentTimeStamp-e._accountsForMovesUpTo;e.vx=(i-e.dx)/c,e.vy=(a-e.dy)/c,e.dx=i,e.dy=a,e._accountsForMovesUpTo=n.mostRecentTimeStamp},create(e){var n={handle:null,shouldCancelClick:!1,timeout:null},t={stateID:Math.random(),moveX:0,moveY:0,x0:0,y0:0,dx:0,dy:0,vx:0,vy:0,numberActiveTouches:0,_accountsForMovesUpTo:0},r={onStartShouldSetResponder(o){return e.onStartShouldSetPanResponder==null?!1:e.onStartShouldSetPanResponder(o,t)},onMoveShouldSetResponder(o){return e.onMoveShouldSetPanResponder==null?!1:e.onMoveShouldSetPanResponder(o,t)},onStartShouldSetResponderCapture(o){return o.nativeEvent.touches.length===1&&F._initializeGestureState(t),t.numberActiveTouches=o.touchHistory.numberActiveTouches,e.onStartShouldSetPanResponderCapture!=null?e.onStartShouldSetPanResponderCapture(o,t):!1},onMoveShouldSetResponderCapture(o){var s=o.touchHistory;return t._accountsForMovesUpTo===s.mostRecentTimeStamp?!1:(F._updateGestureStateOnMove(t,s),e.onMoveShouldSetPanResponderCapture?e.onMoveShouldSetPanResponderCapture(o,t):!1)},onResponderGrant(o){return n.handle||(n.handle=ze.createInteractionHandle()),n.timeout&&xn(n),n.shouldCancelClick=!0,t.x0=Tn(o.touchHistory),t.y0=gn(o.touchHistory),t.dx=0,t.dy=0,e.onPanResponderGrant&&e.onPanResponderGrant(o,t),e.onShouldBlockNativeResponder==null?!0:e.onShouldBlockNativeResponder(o,t)},onResponderReject(o){q(n,e.onPanResponderReject,o,t)},onResponderRelease(o){q(n,e.onPanResponderRelease,o,t),ye(n),F._initializeGestureState(t)},onResponderStart(o){var s=o.touchHistory;t.numberActiveTouches=s.numberActiveTouches,e.onPanResponderStart&&e.onPanResponderStart(o,t)},onResponderMove(o){var s=o.touchHistory;t._accountsForMovesUpTo!==s.mostRecentTimeStamp&&(F._updateGestureStateOnMove(t,s),e.onPanResponderMove&&e.onPanResponderMove(o,t))},onResponderEnd(o){var s=o.touchHistory;t.numberActiveTouches=s.numberActiveTouches,q(n,e.onPanResponderEnd,o,t)},onResponderTerminate(o){q(n,e.onPanResponderTerminate,o,t),ye(n),F._initializeGestureState(t)},onResponderTerminationRequest(o){return e.onPanResponderTerminationRequest==null?!0:e.onPanResponderTerminationRequest(o,t)},onClickCapture:o=>{n.shouldCancelClick===!0&&(o.stopPropagation(),o.preventDefault())}};return{panHandlers:r,getInteractionHandle(){return n.handle}}}};function q(e,n,t,r){e.handle&&(ze.clearInteractionHandle(e.handle),e.handle=null),n&&n(t,r)}function xn(e){clearTimeout(e.timeout)}function ye(e){e.timeout=setTimeout(()=>{e.shouldCancelClick=!1},250)}const M=ue.create({controlsContainer:{flexDirection:"row",justifyContent:ie.isRTL?"flex-end":"flex-start",alignItems:"center"},highThumbContainer:{position:"absolute"},railsContainer:{...ue.absoluteFillObject,flexDirection:"row",alignItems:"center"},labelFixedContainer:{alignItems:ie.isRTL?"flex-end":"flex-start"},labelFloatingContainer:{position:"absolute",left:0,right:0,alignItems:ie.isRTL?"flex-end":"flex-start"},touchableArea:{...ue.absoluteFillObject},label:{backgroundColor:fn.black_01,paddingVertical:ee.XXS,paddingHorizontal:ee.XS,borderRadius:le.XS}}),wn=(e,n,t)=>{if(n===t)return e<n;const r=Math.abs(e-n),o=Math.abs(e-t);return r<o},X=(e,n,t)=>Math.min(Math.max(e,n),t),yn=(e,n,t,r,o,s)=>{const h=n-t,i=s/(o-r);let a=(e-t/2)/h;const c=a%i;return a-=c,c/i>=.5&&(a+=i),X(r+Math.round(a/i)*s,r,o)},Pn=(e,n)=>{const[t,r]=u.useState(Number.NaN);u.useImperativeHandle(n,()=>({setValue:o}));const o=s=>{r(s)};return v.jsx(P,{...e,style:[M.label,Ne.Light],children:v.jsx(vn,{typography:"label_s_medium",children:t})})},Sn=u.forwardRef(Pn),Mn=(e,n,t,r,o)=>{const s=e===void 0?t:X(e,t,r),h=n===void 0?r:X(n,t,r),i=u.useRef({low:s,high:h,step:o,min:s,max:h}),{low:a,high:c}=i.current,l={lowPrev:a,highPrev:c},d=X(e===void 0?a:e,t,r),T=X(n===void 0?c:n,t,r);return Object.assign(i.current,{low:d,high:T,min:t,max:r}),{inPropsRef:i,inPropsRefPrev:l,setLow:C=>i.current.low=C,setHigh:C=>i.current.high=C}},Be=(e,n)=>u.useCallback(({nativeEvent:t})=>{const{layout:{width:r}}=t,{current:o}=e;o!==r&&(e.current=r,n&&n(r))},[n,e]),Xn=(e,n,t,r,o,s)=>{const h=u.useRef(new b.Value(0)),i=u.useRef(0),a=u.useRef(null),{current:c}=h,l=u.useCallback((C,x)=>{var A;if(n.current.isLow&&o||!n.current.isLow&&s)return;const{current:V}=i,{current:I}=e,_=C-V/2;h.current.setValue(r?_:X(_,0,I-V)),(A=a.current)==null||A.setValue(x)},[i,e,r,o,s]),d=Be(i,()=>{l(n.current.lastPosition,n.current.lastValue)}),T={transform:[{translateX:c}]},g=t&&(n.current.isLow&&!o||!n.current.isLow&&!s);return[v.jsx(b.View,{style:[T,{opacity:g?1:0}],children:v.jsx(Sn,{onLayout:d,ref:a})}),l]},Ln=(e,n,t,r)=>{const{current:o}=u.useRef(new b.Value(0)),{current:s}=u.useRef(new b.Value(0)),h=u.useCallback(()=>{const{low:a,high:c,min:l,max:d}=e.current,{current:T}=n,g=(d-l)/(T-t),L=(a-l)/g,C=(d-c)/g;o.setValue(r?0:L),s.setValue(r?T-t-L:C)},[e,n,r,t,o,s]);return[u.useMemo(()=>({position:"absolute",left:o,right:s}),[o,s]),h]},Vn=e=>{const[n,t]=u.useState(0),r=u.useCallback(({nativeEvent:h})=>{const{layout:{height:i}}=h;t(i)},[]),o=e?-(n+ee.XS):ee.XS;return{style:[e?M.labelFloatingContainer:M.labelFixedContainer,{top:o}],onLayout:r}},Pe=()=>!0,ce=()=>!1,An=u.memo(({min:e,max:n,minRange:t=0,step:r,low:o,high:s,floatingLabel:h=!1,allowLabelOverflow:i=!1,disableRange:a=!1,disabledHigh:c=!1,disabledLow:l=!1,onValueChanged:d,onSliderTouchStart:T,onSliderTouchEnd:g,...L})=>{const{theme:C}=u.useContext(Cn),{inPropsRef:x,inPropsRefPrev:V,setLow:I,setHigh:_}=Mn(o,a?n:s,e,n,r),A=u.useRef(new b.Value(0)),ne=u.useRef(new b.Value(0)),H=u.useRef(new b.Value(0)).current,{current:de}=A,{current:he}=ne,w=u.useRef({isLow:!0,lastValue:0,lastPosition:0}),[qe,pe]=u.useState(!1),Y=u.useRef(0),[m,Ee]=u.useState(0),[Je,D]=Ln(x,Y,m,a),W=u.useCallback(()=>{const{current:p}=Y;if(!m||!p)return;const{low:f,high:j}=x.current;if(!a){const{current:k}=ne,re=(j-e)/(n-e)*(p-m);k.setValue(re)}const{current:te}=A,oe=(f-e)/(n-e)*(p-m);te.setValue(oe),typeof D=="function"&&D(),d==null||d(f,j,!1)},[a,x,n,e,d,m,D]);u.useEffect(()=>{const{lowPrev:p,highPrev:f}=V;(o!==void 0&&o!==p||s!==void 0&&s!==f)&&W()},[s,V.lowPrev,V.highPrev,o]),u.useEffect(()=>{W()},[W]);const Ke=Be(Y,W),Qe=u.useCallback(({nativeEvent:p})=>{const{layout:{width:f}}=p;m!==f&&Ee(f)},[m]),Ze=u.useMemo(()=>({transform:[{translateX:de}]}),[de]),$e=u.useMemo(()=>a?null:[M.highThumbContainer,{transform:[{translateX:he}]}],[a,he]),en=u.useMemo(()=>[M.railsContainer,{marginHorizontal:m/2}],[m]),[nn,U]=Xn(Y,w,qe,i,l,c),me=p=>{const j=p==="low"&&l||p==="high"&&c?C.colors.text.disable:C.colors.primary;return v.jsx(P,{style:[Ne.Light,{width:20,height:20,borderRadius:le.M,borderWidth:4,borderColor:C.colors.background.surface,backgroundColor:j}]})},tn=me("low"),on=me("high"),rn=Vn(h),{panHandlers:sn}=u.useMemo(()=>F.create({onStartShouldSetPanResponderCapture:ce,onMoveShouldSetPanResponderCapture:ce,onPanResponderTerminationRequest:ce,onPanResponderTerminate:Pe,onShouldBlockNativeResponder:Pe,onMoveShouldSetPanResponder:(p,f)=>Math.abs(f.dx)>2*Math.abs(f.dy),onPanResponderGrant:({nativeEvent:p},f)=>{const{numberActiveTouches:j}=f;if(j>1)return;pe(!0);const{current:te}=A,{current:oe}=ne,{locationX:k,pageX:re}=p,un=re-k,{low:ve,high:Ce,min:G,max:Re}=x.current;T==null||T(ve,Ce);const z=Y.current,cn=m/2+(ve-G)/(Re-G)*(z-m),ln=m/2+(Ce-G)/(Re-G)*(z-m),y=a||wn(k,cn,ln);if(w.current.isLow=y,y&&l||!y&&c)return;const be=se=>{const{low:N,high:Te,min:B,max:ae,step:dn}=x.current,hn=y?B:N+t,pn=y?Te-t:ae,S=X(yn(se,z,m,B,ae,dn),hn,pn);if(w.current.lastValue===S)return;const mn=z-m,ge=(S-B)/(ae-B)*mn;w.current.lastValue=S,w.current.lastPosition=ge+m/2,(y?te:oe).setValue(ge),d==null||d(y?S:N,y?Te:S,!0),(y?I:_)(S),U&&typeof U=="function"&&U(w.current.lastPosition,S),typeof D=="function"&&D()};be(k),H.removeAllListeners(),H.addListener(({value:se})=>{const N=se-un;be(N)})},onPanResponderMove:(p,f)=>{(w.current.isLow?l:c)||b.event([null,{moveX:H}],{useNativeDriver:!1})(p,f)},onPanResponderRelease:()=>{pe(!1);const{low:p,high:f}=x.current;w.current.isLow&&l||!w.current.isLow&&c||g==null||g(p,f)}}),[H,x,m,a,d,c,l,I,_,U,D]),fe=p=>v.jsx(P,{style:{width:"100%",height:4,borderRadius:le.L,backgroundColor:p}}),an=c&&l?C.colors.text.disable:C.colors.primary;return v.jsxs(P,{...L,children:[v.jsx(P,{...rn,children:nn}),v.jsxs(P,{onLayout:Ke,style:M.controlsContainer,children:[v.jsxs(P,{style:en,children:[fe(C.colors.background.default),v.jsx(b.View,{style:Je,children:fe(an)})]}),v.jsx(b.View,{style:Ze,onLayout:Qe,children:tn}),!a&&v.jsx(b.View,{style:$e,children:on}),v.jsx(P,{...sn,style:M.touchableArea,collapsable:!1})]})]})}),Yn={title:"Library/Slider",component:An,parameters:{layout:"centered"},tags:["autodocs"],decorators:[e=>v.jsx(P,{style:{width:375,height:40,backgroundColor:"#f0f0f0",borderRadius:12},children:v.jsx(e,{})})]},E={args:{min:0,max:100,step:1,onValueChanged:O()}},J={args:{min:0,max:100,step:1,low:20,high:80,onValueChanged:O()}},K={args:{min:0,max:100,step:1,low:20,high:80,minRange:20,onValueChanged:O()}},Q={args:{min:0,max:100,step:1,floatingLabel:!0,onValueChanged:O()}},Z={args:{min:0,max:100,step:1,disableRange:!0,onValueChanged:O()}},$={args:{min:0,max:100,step:1,low:20,high:80,disabledLow:!0,disabledHigh:!0,onValueChanged:O()}};var Se,Me,Xe;E.parameters={...E.parameters,docs:{...(Se=E.parameters)==null?void 0:Se.docs,source:{originalSource:`{
  args: {
    min: 0,
    max: 100,
    step: 1,
    onValueChanged: fn()
  }
}`,...(Xe=(Me=E.parameters)==null?void 0:Me.docs)==null?void 0:Xe.source}}};var Le,Ve,Ae;J.parameters={...J.parameters,docs:{...(Le=J.parameters)==null?void 0:Le.docs,source:{originalSource:`{
  args: {
    min: 0,
    max: 100,
    step: 1,
    low: 20,
    high: 80,
    onValueChanged: fn()
  }
}`,...(Ae=(Ve=J.parameters)==null?void 0:Ve.docs)==null?void 0:Ae.source}}};var De,je,Fe;K.parameters={...K.parameters,docs:{...(De=K.parameters)==null?void 0:De.docs,source:{originalSource:`{
  args: {
    min: 0,
    max: 100,
    step: 1,
    low: 20,
    high: 80,
    minRange: 20,
    onValueChanged: fn()
  }
}`,...(Fe=(je=K.parameters)==null?void 0:je.docs)==null?void 0:Fe.source}}};var Oe,_e,Ye;Q.parameters={...Q.parameters,docs:{...(Oe=Q.parameters)==null?void 0:Oe.docs,source:{originalSource:`{
  args: {
    min: 0,
    max: 100,
    step: 1,
    floatingLabel: true,
    onValueChanged: fn()
  }
}`,...(Ye=(_e=Q.parameters)==null?void 0:_e.docs)==null?void 0:Ye.source}}};var ke,Ie,He;Z.parameters={...Z.parameters,docs:{...(ke=Z.parameters)==null?void 0:ke.docs,source:{originalSource:`{
  args: {
    min: 0,
    max: 100,
    step: 1,
    disableRange: true,
    onValueChanged: fn()
  }
}`,...(He=(Ie=Z.parameters)==null?void 0:Ie.docs)==null?void 0:He.source}}};var We,Ue,Ge;$.parameters={...$.parameters,docs:{...(We=$.parameters)==null?void 0:We.docs,source:{originalSource:`{
  args: {
    min: 0,
    max: 100,
    step: 1,
    low: 20,
    high: 80,
    disabledLow: true,
    disabledHigh: true,
    onValueChanged: fn()
  }
}`,...(Ge=(Ue=$.parameters)==null?void 0:Ue.docs)==null?void 0:Ge.source}}};const kn=["Default","WithRange","WithMinRange","WithFloatingLabels","WithDisabledRange","WithDisabledHandles"];export{E as Default,$ as WithDisabledHandles,Z as WithDisabledRange,Q as WithFloatingLabels,K as WithMinRange,J as WithRange,kn as __namedExportsOrder,Yn as default};

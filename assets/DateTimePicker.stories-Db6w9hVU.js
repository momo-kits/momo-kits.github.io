import{fn as ee}from"./index-BgJgh-x_.js";import{j as f}from"./jsx-runtime-D_zvdyIk.js";import{r as i}from"./index-DI7CEG0L.js";import{f as te,l as ne,A as G,p as w,s as O,F as ae,o as re,k as _,T as se}from"./styles-Dd_0X69m.js";import{s as oe,V as Y}from"./index-BzmpT3sc.js";const x=oe.create({wheelItem:{height:42,width:"100%",alignItems:"center",justifyContent:"center"},wheelPicker:{borderWidth:1,borderRadius:ne.S,flex:1},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,justifyContent:"center",zIndex:-1},selectedItem:{height:42,backgroundColor:te.blue_10},datePicker:{overflow:"hidden",flexDirection:"row",justifyContent:"space-evenly"}}),P=r=>r>9?String(r):`0${r}`,ie=(r,t,e,n)=>{const s=new Date(r,t,0).getDate();let a=1,c=s;r===e.getFullYear()&&t===e.getMonth()+1&&(a=e.getDate()),r===n.getFullYear()&&t===n.getMonth()+1&&(c=n.getDate());const h=[];for(let p=a;p<=c;p++)h.push(P(p));return h},le=(r,t,e)=>{let n=1,s=12;e===r.getFullYear()&&(n=r.getMonth()+1),e===t.getFullYear()&&(s=t.getMonth()+1);const a=[];for(let c=n;c<=s;c++)a.push(P(c));return a},ce=(r,t)=>{const e=r.getFullYear(),n=t.getFullYear(),s=[];for(let a=e;a<=n;a++)s.push(a.toString());return s},ue=r=>{const t=[];for(let e=0;e<r;e++){let n=e;r===12&&(n=e+1),t.push(P(n))}return t},de=r=>{const t=[];for(let e=0;e<60;e+=r)t.push(P(e));return t},me=["","","AM","PM","",""];function pe(r,t){let e;const n=function(...s){clearTimeout(e);const a=this;e=setTimeout(()=>{r.apply(a,s)},t)};return n.cancel=()=>{clearTimeout(e)},n}const K=({item:r,index:t,scrollAnimatedValue:e,itemSize:n})=>{const{theme:s}=i.useContext(G),a=w.divide(e,n),c=w.subtract(t,a),h=c.interpolate({inputRange:[0,1,2,3,4],outputRange:[.4,.8,1,.8,.4],extrapolate:"clamp"})||1,p=c.interpolate({inputRange:[0,1,2,3,4],outputRange:[.87,.87,1,.87,.87],extrapolate:"clamp"})||1;return f.jsx(w.View,{style:[x.wheelItem,{opacity:h}],children:f.jsx(w.Text,{style:{fontFamily:`${s.font}-Semibold`,transform:[{scale:p}],fontSize:O(16),lineHeight:O(22)},children:r})})},fe=i.memo(K);K.__docgenInfo={description:"",methods:[],displayName:"WheelPickerItem",props:{item:{required:!0,tsType:{name:"number"},description:""},index:{required:!0,tsType:{name:"number"},description:""},scrollAnimatedValue:{required:!0,tsType:{name:"AnimatedValue"},description:""},itemSize:{required:!0,tsType:{name:"number"},description:""}}};const he=w.createAnimatedComponent(ae),Q=({name:r,data:t,style:e,onChange:n,selectedData:s})=>{const{theme:a}=i.useContext(G),c=i.useRef(null),h=i.useRef(new w.Value(0)).current,p=i.useRef(!1),y=42,m=15;i.useEffect(()=>(k(),()=>{k.cancel()}),[t.length]);const q=(o,l)=>{let W=o.reduce((D,T)=>{let b=Math.abs(Number(D)-Number(l)),I=Math.abs(Number(T)-Number(l));return b===I?D<T?D:T:I<b?T:D});return o.indexOf(W)},k=pe(()=>{var l;let o=t.indexOf(s);o===-1&&(o=q(t,s)),o<2&&(o=2),o>t.length-3&&(o=t.length-3),(l=c.current)==null||l.scrollToIndex({index:o-2,animated:!0})},100),A=i.useCallback(({item:o,index:l})=>f.jsx(fe,{item:o,index:l,scrollAnimatedValue:h,itemSize:y}),[]),v=()=>f.jsx(Y,{style:x.overlay,children:f.jsx(Y,{style:x.selectedItem})}),S=(o,l)=>({length:y,offset:y*l,index:l}),E=()=>{p.current=!0},R=o=>{if(p.current){let l=Math.round(o.nativeEvent.contentOffset.y/y);n==null||n(r,t[l+2])}p.current=!1},N=o=>{console.warn("FlatList scrollToIndex failed",o)};return f.jsxs(Y,{style:[e,x.wheelPicker,{borderColor:a.colors.border.default,backgroundColor:a.colors.background.surface}],children:[f.jsx(he,{windowSize:7,initialNumToRender:m,maxToRenderPerBatch:m,snapToInterval:y,snapToOffsets:t.map((o,l)=>l*y),keyExtractor:(o,l)=>`Wheel picker item ${o}-${l}`,decelerationRate:"fast",getItemLayout:S,onScrollToIndexFailed:N,onMomentumScrollBegin:E,onScroll:w.event([{nativeEvent:{contentOffset:{y:h}}}],{useNativeDriver:!0}),onMomentumScrollEnd:R,ref:c,showsVerticalScrollIndicator:!1,data:t,renderItem:A}),v()]})},ye=i.memo(Q);Q.__docgenInfo={description:"",methods:[],displayName:"WheelPicker",props:{name:{required:!0,tsType:{name:"string"},description:"The name of the picker, used to identify it."},data:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"The data to be displayed and selected in the picker."},style:{required:!0,tsType:{name:"ViewStyle"},description:"Custom styles to apply to the WheelPicker component."},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(name: string, data: string) => void",signature:{arguments:[{type:{name:"string"},name:"name"},{type:{name:"string"},name:"data"}],return:{name:"void"}}},description:"A callback function that is triggered when the selected data changes."},selectedData:{required:!0,tsType:{name:"string"},description:"The currently selected data in the picker."}}};const j=new Date,V=new Date(j),C=new Date(j);V.setFullYear(V.getFullYear()-10);C.setFullYear(C.getFullYear()+10);j.setHours(0,0);const ge=re.get("window").width,U=({format:r="DD-MM-YYYY",minuteInterval:t=1,onChange:e,selectedValue:n=j,minDate:s=V,maxDate:a=C,arrayLabelTime:c=[],style:h})=>{const[p,y]=i.useState([]);let[m,q]=i.useState({day:n.getDate(),month:n.getMonth()+1,year:n.getFullYear(),hour:n.getHours(),min:n.getMinutes()});const[k,A]=i.useState(ge);i.useEffect(()=>{W()},[m]),i.useEffect(()=>{let u=n;n<s?u=s:n>a&&(u=a),e==null||e(u)},[]);const v=r.split(/[^A-Za-z]+/),S=v.length===1&&v[0]==="HH",E=i.useMemo(()=>ie(+m.year,+m.month,s,a),[m.year,m.month,s,a]),R=i.useMemo(()=>le(s,a,+m.year),[m.year,s,a]),N=i.useMemo(()=>ce(s,a),[s,a]),o=i.useMemo(()=>ue(S?12:24),[]),l=i.useMemo(()=>de(t),[]),W=()=>{const u={DD:{name:"day",data:E},MM:{name:"month",data:R},YYYY:{name:"year",data:N},HH:{name:"hour",data:o},mm:{name:"min",data:l}},g=v.map(d=>{const M=u[d];if(!M)throw new Error(`Invalid format component: ${d}`);return{...M}});S&&g.push({name:"timeMode",data:me}),y(g)},D=p.length,T=(u,g)=>{const d={...m,[u]:g};if(u==="month"){const L=new Date(d.year,d.month,0).getDate();d.day>L&&(d.day=L)}const M=new Date(d.year,d.month-1,d.day,d.hour,d.min);M<=a&&M>=s&&JSON.stringify(d.valueOf())!==JSON.stringify(m.valueOf())&&(e==null||e(M)),q(d)},b=["",""],I=u=>{k!==u.nativeEvent.layout.width&&A(u.nativeEvent.layout.width)},X=(375-_.M*2-(D-1)*_.M)/D;return f.jsx(Y,{onLayout:I,style:[h,x.datePicker,{height:c.length>0?O(238):O(210)}],children:p.map((u,g)=>f.jsxs(Y,{children:[c[g]&&f.jsx(Y,{style:{alignItems:"center",marginBottom:_.S},children:f.jsx(se,{typography:"action_s_bold",children:c[g]})}),f.jsx(ye,{selectedData:String(m[u.name]),onChange:T,data:[...b,...u.data,...b],name:u.name,style:{width:X}})]},`${u.name}_${g}`))})};U.__docgenInfo={description:"",methods:[],displayName:"DateTimePicker",props:{format:{required:!1,tsType:{name:"string"},description:"Optional. Specifies the format for displaying the date and time.",defaultValue:{value:"'DD-MM-YYYY'",computed:!1}},minuteInterval:{required:!1,tsType:{name:"number"},description:"Optional. The interval between minutes in the picker. For example, '15' would show minute options 0, 15, 30, 45, etc.",defaultValue:{value:"1",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"data"}],return:{name:"void"}}},description:"Optional. A callback function that is triggered when the date or time value changes."},selectedValue:{required:!1,tsType:{name:"Date"},description:"Optional. The initially selected date and time value.",defaultValue:{value:"new Date()",computed:!1}},minDate:{required:!1,tsType:{name:"Date"},description:"Optional. The minimum date that can be selected.",defaultValue:{value:"new Date(date)",computed:!1}},maxDate:{required:!1,tsType:{name:"Date"},description:"Optional. The maximum date that can be selected.",defaultValue:{value:"new Date(date)",computed:!1}},arrayLabelTime:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"Optional. Label for Time",defaultValue:{value:"[]",computed:!1}},style:{required:!1,tsType:{name:"ViewStyle"},description:""}}};const ve={title:"Library/DateTimePicker",component:U,parameters:{layout:"centered"},tags:["autodocs"]},z=new Date,H=new Date(z);H.setFullYear(H.getFullYear()-10);const $=new Date(z);$.setFullYear($.getFullYear()+10);const F={args:{selectedValue:z,minDate:H,maxDate:$,onChange:ee(),format:"DD-MM-YYYY"}};var B,J,Z;F.parameters={...F.parameters,docs:{...(B=F.parameters)==null?void 0:B.docs,source:{originalSource:`{
  args: {
    selectedValue: today,
    minDate,
    maxDate,
    onChange: fn(),
    format: 'DD-MM-YYYY'
  }
}`,...(Z=(J=F.parameters)==null?void 0:J.docs)==null?void 0:Z.source}}};const be=["Default"];export{F as Default,be as __namedExportsOrder,ve as default};
